<div style="display: flex">
    <div>
        <table class="sorttable table table-hover table-striped table-responsive table-condensed table-bordered header-fixed">
            <thead>
            <tr>
                <th>Ωρα</th>
            <tbody>
            <tr style="cursor: pointer">
                <td>
                    <div ng-repeat="hour in hours track by $index" ng-init="hoursIndex = $index"
                         style="top: {{$index*20}}px; height: 20px">{{hour.ht}}
                    </div>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <div style="overflow: auto; width: 100%;height: 465px; position: relative;overflow-x: auto;overflow-y: hidden;">
        <table class="sorttable table table-hover table-striped table-responsive table-condensed table-bordered header-fixed">
            <thead>
            <tr>
                <th ng-repeat="day in headerDays track by $index" ng-init="headerDaysIndex = $index"
                    style="min-width: 160px" ng-click="selectDay(day)">
                    {{day.toLocaleDateString('el-GR',{ weekday: 'short',
                    year:'numeric', month: 'short', day: 'numeric' })}}
                </th>
            <tbody>
            <tr style="cursor: pointer">
                <td ng-repeat="day in headerDays track by $index" ng-init="tdDaysIndex = $index"
                    style="max-height: 400px;height: 340px;">
                    <div style="position: relative;top: 0px;">
                        <div ng-repeat="hour in hours"
                             style="border-bottom: 1px solid #eeeeee; width:100%;height: 20px;display: block;

                            background-color: #cacacaaa"
                             data-toggle="popover"
                             data-content="{{day.toLocaleDateString({weekday: 'short', year: 'numeric', month: 'short', day: 'numeric'})}} - {{hour.ht}}"
                             data-trigger="hover">&nbsp;{{}}
                        </div>
                    </div>
                    <!--<ul ng-repeat="(key, value) in calendar[$index] | groupBy: 'name'">
                        Αίθουσα : {{ key }}
                        <li ng-repeat="book in value">
                            book : {{ book.name }}
                        </li>
                    </ul>-->
                    <div style="display: flex; position: relative; top: -340px;height:340px;" id="calendarPlot">
                        <!--{{$index}}-->
                        <!--<div>{{newCalendar[]}}</div>-->
                        <!--{{calendar[$index]}}-->
                        <div ng-repeat="(key, room) in newCalendar[tdDaysIndex] track by $index"
                             ng-init="newCalendarIndex = $index" class="info"
                             style="display: flex;position: relative; height:340px;width: 107px ; padding-left:5px;padding-right:5px; border: 1px solid #ababab;">
                            <div ng-repeat="book in room track by $index" ng-init="roomIndex = $index" class="info"
                                 id="{{book.did}}"
                                 style="top: {{book.dist}}px; height: {{book.h}}px; min-width:80px; width: 90px;
                             position: absolute; font-size: smaller;
                             background-color: {{book.color}}{{book.new?'66':'33'}}; text-align: left; border: 1px solid #ababab;"
                                 data-toggle="popover"
                                 data-content="{{book.book.ps.tma_per}} {{book.book.ps.teacher}} {{book.pivot.fromt}}-{{book.pivot.tot}}"
                                 data-trigger="hover"
                                 ng-click="popup(book.pivot.id)">
                                <div>{{book.book.ps.tma_code}}</div>
                                <div>{{book.book.ps.tm_per}}</div>

                            </div>
                            <div style="top: 340px; height: 40px;
                             position: absolute; font-size: smaller; max-width: 60px">
                                {{key}}
                            </div>
                        </div>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<show-hide sh-title="Σφάλματα" style="padding: 5px" ng-if="showErrors && bookingErrors.length>0">
    <report-errors></report-errors>
</show-hide>
<show-hide sh-title="Εβδομαδιαίο πρόγραμμα" style="padding: 5px">
    <report-calendar></report-calendar>
</show-hide>
