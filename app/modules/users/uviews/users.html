<navmenu></navmenu>
<div id="users_main">
    <h1> Users </h1>
    <div>total users : {{dp.length}}</div>
    <div id="options_div" style="padding: 5px">
        <button type="button" class="btn btn-primary" ng-click="getUsers()">Get Users</button>
        <button type="button" class="btn btn-primary" ng-click="newUser()">New User</button>
        <input type="text" ng-model="filter" class="form-control" placeholder="search" style="padding: 5px; width: 50%">
        <span class="glyphicon glyphicon-search"></span>
    </div>

    <div id="data_tbl" style="padding: 5px; height: 600px; overflow-y: auto">
        <table>
            <tr>
                <th>id</th>
                <th>tm_id</th>
                <th>fname</th>
                <th>sname</th>
                <th>phone</th>
                <th>em_main</th>
                <th>em_sec</th>
                <th>em_pant</th>
                <th>cat_id</th>
                <th>comments</th>
                <th>user</th>
                <!--<th>hash</th>-->
                <th><span class="glyphicon glyphicon-option-horizontal"></span></button></th>
            </tr>
            <tr ng-repeat="user in dp|filter:filter" ng-click="selectUser(user);" style="cursor: pointer"
                ng-class="{selected: user.id === item.id}">
                <td>{{ user.id }}</td>
                <td>{{ user.tm_id }}</td>
                <td>{{ user.fname }}</td>
                <td>{{ user.sname}}</td>
                <td>{{ user.phone}}</td>
                <td>{{ user.em_main}}</td>
                <td>{{ user.em_sec}}</td>
                <td>{{ user.em_pant}}</td>
                <td>{{ user.cat_id}}</td>
                <td>{{ user.comments}}</td>
                <td>{{ user.user}}</td>
                <!--<td>{{user.hash}}</td>-->
                <td>
                    <button ng-click="selectUser(user);" type="button" class="btn btn-primary">
                        <span class="glyphicon glyphicon-pencil"></span>
                    </button>
                    <button ng-click="deleteUser(user)" type="button" class="btn btn-primary">
                        <span class="glyphicon glyphicon-erase"></span>
                    </button>
                    <button ng-click="getRoles(user)" type="button" class="btn btn-primary">
                        <span class="glyphicon glyphicon-briefcase"></span>
                    </button>
                </td>
            </tr>
        </table>
    </div>

    <div>
        <table>
            <tr>
                <th>id</th>
                <th>role</th>
                <th>descr</th>
            </tr>
            <tr ng-repeat="role in uRoles">
                <td>{{ role.id }}</td>
                <td>{{ role.role }}</td>
                <td>{{ role.descr }}</td>
            </tr>
        </table>
    </div>

    <div style="padding: 5px">
        <input type="text" ng-model="item.id" class="form-control" placeholder="id" ng-disabled="true"
               style="padding: 5px">
        <input type="text" ng-model="item.tm_id" class="form-control" placeholder="tm_id" style="padding: 5px">
        <input type="text" ng-model="item.fname" class="form-control" placeholder="fname" style="padding: 5px">
        <input type="text" ng-model="item.sname" class="form-control" placeholder="sname" style="padding: 5px">
        <input type="text" ng-model="item.em_main" class="form-control" placeholder="em_main"
               style="padding: 5px">
        <input type="text" ng-model="item.em_sec" class="form-control" placeholder="em_sec" style="padding: 5px">
        <input type="text" ng-model="item.em_pant" class="form-control" placeholder="em_pant"
               style="padding: 5px">
        <input type="text" ng-model="item.cat_id" class="form-control" placeholder="cat_id" style="padding: 5px">
        <input type="text" ng-model="item.comments" class="form-control" placeholder="commetns"
               style="padding: 5px">
        <input type="text" ng-model="item.user" class="form-control" placeholder="user" style="padding: 5px">
        <input type="password" ng-model="item.hast" class="form-control" placeholder="hash" style="padding: 5px">

        <button type="button" class="btn btn-primary" ng-click="updateUser(item)" style="padding: 5px"
                ng-if="item.id>0">Upd User
        </button>
        <button type="button" class="btn btn-primary" ng-click="saveUser(item)" style="padding: 5px"
                ng-if="item.tm_id && !item.id">Save User
        </button>
    </div>
</div>
