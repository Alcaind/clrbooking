"use strict";angular.module("Requests").controller("CopyDayController",["$scope","api","ClrStatusSrv","globalVarsSrv","AuthenticationService","MakeModal",function(e,t,o,a,i,d){e.copyDayRequest=function(o,a){var i=o,d=new Date(o);d=new Date(d.setDate(d.getDate()+1)),d=new Date(d.setDate(d.getDate()+1)),t.apiCall("POST","api/public/roombook/copyday",function(t){e.reqToPush=[];var o=t.data;o.map(function(t){e.selectedRooms=[],t.rooms.map(function(t){if(t.pivot.date_index===i.getDay()){var o=Object.assign({},t);t.pivot.fromt=new Date("1970-01-01 "+t.pivot.fromt+" "),t.pivot.tot=new Date("1970-01-01 "+t.pivot.tot),delete t.pivot.id,delete t.pivot.req_id,t.pivot.date_index=1*e.item.date_index,o=Object.assign(o,t.pivot),e.selectedRooms.push(o);for(var a=0;a<e.rooms.length;a++)t.id===e.rooms[a].id&&(e.rooms[a].checked=!0);t=Object.assign(t,t.pivot)}});var o=Object.assign({},t);delete o.id,delete o.req_dt,delete o.created_at,delete o.updated_at,o.status=3,o.conf_id=e.item.conf_id,o.period=e.item.period,o.rooms=e.selectedRooms,e.reqToPush.push(o)}),e.item.rooms=e.selectedRooms},void 0,{fromd:i,dd:dd})}}]);