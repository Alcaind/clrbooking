"use strict";angular.module("Ps",["MainComponents","ui.bootstrap","ApiModules","Authentication","GlobalVarsSrvs"]).controller("PsController",["$scope","AuthenticationService","makeController","globalVarsSrv","api","MakeModal",function(t,l,o,i,r,n){t.configs={},t.conf_id=8,t.tms=[],t.$watch("conf_id",function(l){l&&(t.urlr="/ps/conf/"+l,t.ctrl&&t.ctrl.setUrl(t.urlr))}),r.apiCall("GET","api/public/config",function(l){t.configs=l.data,t.configs.map(function(l){1===l.status&&(t.conf_id=l.id)}),t.urlr="/ps/conf/"+t.conf_id,t.ctrl=o.mainController("","psTableConf","Πρόγραμμα Σπουδών"),t.ctrl.setUrl(t.urlr),t.ctrl.init(),r.apiCall("GET","api/public/tms",function(l){t.tms=l.data}),t.$watch("ctrl.dp",function(l,o){if(l.length)for(var i in t.ctrl.filter)l[i]===t.ctrl.filter[i]&&ctrl.getAll()})}),t.deletePs=function(l){r.apiCall("DELETE","api/public/ps/"+l.id,function(o){t.ctrl.dp.splice(t.ctrl.dp.indexOf(l),1),n.generalInfoModal("sm","Info","info","Eπιτυχής διαγραφή",1)})}}]).controller("PsProfileController",["$scope","$routeParams","api","MakeModal","AuthenticationService","makeController","globalVarsSrv",function(t,l,o,i,r,n,c){t.ctrl=n.profileController("/ps","psTableConf"),t.tms=[],t.configs=[],t.$watch("ctrl.item.tm",function(l){l&&(t.ctrl.item.tm_code=l.id,t.ctrl.item.tm_per=l.descr)}),o.apiCall("GET","api/public/config",function(l){t.configs=l.data,o.apiCall("GET","api/public/tms",function(l){t.tms=l.data,t.ctrl.init()})})}]).component("psProfile",{restrict:"EA",templateUrl:"modules/ps/psviews/psprofile.html",scope:{method:"="},controller:"PsProfileController"});